# 협동 인프라 기반 차량 포지셔닝

## Abstract
많은 운전 지원 시스템은 정확한 차량 위치 파악에 의존함. 이것은 일반적으로 관성 센서, 속도 센서, 휠 틱 센서 및 스티어링 휠 각도 센서와 같은 온보드 센서와 함께 GNSS(Global Navigation Sateillite Systems)에서 제공됨. 그러나 이러한 접근 방식은 GNSS 중단이 발생할 경우 오류가 축적됨. 또한 GNSS는 위성 가시선 차단, 신호 감쇠 및 다중 경로 전파로 인해 도시와 같은 환경에서 성능이 좋지 않다는 것이 널리 알려져 있음. 레이더 센서로 감지 된 주변 도로 인프라 객체(RIO)를 이용하여 GNSS 기반 측위와 관련된 오류를 억제하는 솔수션을 제안함. 이 물체의 위치는 사전에 알려지지 않았기 때문에 차량 간 통신을 사용하여 차량간에 예상 위치를 공유하고 이러한 방식으로 시간이 지남에 따라 전반적인 위치 정확도를 개선하는 것이 좋음. 이러한 방식으로 GNSS 거부 영역에 진입하는 차량의 위치 정확도를 유지할 수 있고, GNSS를 사용할 수 있는 영역에서 더 나은 결과를 얻을 수 있음.

## Introduction
도로 차량은 자신의 위치를 점점 더 정확하고 신뢰할 수 있께 추정해야함. 특히 미래의 ADAS(Advanced Driver Assistance Systems)의 맥락에서, 예를 들어 충돌 방지 또는 협조적인 적응형 크루즈 컨트로로가 같이 이 위치 추정은 주변 환경 변화에 견고해야 함. 도로 차량의 자체 위치 지정은 전통적으로 GNSS를 사용하여 해결해 왔음. 이 시스템을 통해 차량은 최소 4개의 위성에서 전송 된 신호의 전파 시간을 측정하여 지구상에서 위치를 찾음. 그러나 장애물이 위성에 대한 가시선(LOS)를 차단하면 신호 전력이 떨어지거나 위성이 완전히 차단되어 예상 위치에 큰 오류가 발생함. 또한 다중 경로 전파는 특히, 도시 환경에서 몇 미터의 차량 위치 오류의 원인이 됨. GNSS 단독 포지셔닝에는 터널이나 차고 및 주차장 내부를 주행하는 동안 위치 솔루션을 사용 할 수 없다는 단점이 있음. 그림 1 은 도시 협곡을 통과하고 터널을 빠져 나가기위한 예상 차량 위치를 보여줌. 시대 별 최소 제곱 알고리즘(노랑색) 및 칼만 필터 위치 추정(파랑색)은 이러한 상황에서 수십 미터 정도의 큰 오류를 나타내거나 때로는 완전히 사용할 수 없음.

![fig 1](./img/fig1.PNG)

이러한 한계를 극복하고 여전히 위치 솔루션을 제공하기 위해 센서 융합 접근법이 일반적으로 사용됨. 이러한 방법은 가속도계, 자이로스코프, 속도 센서 및 주행 거리계와 같은 온보드 센서를 사용하여 추측 항법(dead-reckoning)으로 알려진 접근 방식을 따라 시간 경과에 따른 차량의 위치를 추정함. 그러나 이것은 센서의 오류가 위치로 전파되어 시간이 지남에 따라 누적된다는 단점이 있음. GNSS가 없는 상황에서도 현지화를 제공하는 한 가지 가능한 접근 방식은 파일럿으로 알려져 있음. 조종시 차량의 위치는 랜드 마크라고 하는 외부 참조 또는 앵커 포인트를 사용하여 추정함. 카메라, 레이더 센서 또는 레이저 스캐너 또는 모바일 기지국 또는 WiFi 액세스 포인트와 같은 무선 비콘으로 감지 된 주변 물체 일 수 있음.

GNSS에서 주변 랜드 마크, 즉 지도의 위치가 사전에 알려지지 않은 경우 SLAM(Simultaneous Localization and Mapping)이라는 접근 방식을 따름. SLAM에서 환경지도는 로봇, 즉 차량의 현지화 됨과 동시에 만들어 짐. 그러나 SLAM에서도 앞서 언급 한 동일한 오류 누적이 발생함. 이미 감지된 랜드 마크(루프 폐쇄)를 다시 방문하면 이러한 오류 증가를 줄이는데 도움이 됨

자율 주행을 위한 자동차 환경의 확률 지도가 [2]와 [3]에 제시되어있음. [4]에서는 기성 카메라를 이용하여 차량에 레이더 검출 차선 표시 및 보호하기 위한 위치 파악 알고리즘이 제안됨. 생성 된 지도의 품질을 평가하는 로봇을 위한 레이더 기반 위치 파악 알고리즘이 [5]에 제시되어 있음. [6]의 저자는 자동차 환경에서 360도 FMCW(Frequency Modulated Continuous Wave) 24GHz레이더에만 기반한 SLAM 접근 방식을 제안하는 반면 [7]은 동일한 목적으로 레이저 스캐너를 사용함. 시각적 SLAM의 고유한 드리프트는 [8]에서 차량 자체 위치 파악을 위한 지도 정보를 통합함으로써 뒷받침 됨. [9]의 저자는 회전 거리 센서에 대한 위치 파악 기술을 제안함. 철도 여역에서 트랙 특징 추출을 기반으로 한 SLAM 접근법은 [10]에서 제안되었음.

본 논문에서 GNSS 포지셔닝이 막힘 및 다중 경로 전파로 인해 심하게 손상되거나 완전히 사용할 수 없는 지역에서 차량 위치 파악을 위한 방법을 제안함. 이를 위해 자동차 레이더 센서를 기반으로 한 SLAM접근 방식을 차량 자체 위치 파악의 특수한 경우에 적용하고 생성된 RIO(Road Infrastructure Objects) 맵을 차량간에 공유하여 위치 파악을 향상시키는 방법으로 확장함. 이 GNSS 구부 영역을 통과하는 각 차량과 함께. 이 맵을 교환하기 위해 V2V(Vehicle-to-Cehicle)통신이 고려됨. 미국의 DSRC(Dedicated Short-range Communication)와 유럽의 ITS-G5는 IEEE 802.11 WiFi 표준을 기반으로 한 차량 간 직접 통신을위한 후보 기술임

## Infrastructure Localization
이 섹션에서는 레이더 센서의 측정 모델과 RIO의 확률 적 맵의 동적 생성을 통합하여 한 차량의 자체 위치 파악 문제를 이론적인 방식으로 공식화 함.

### Vehicle Localization
챠량이 위치, 전직 속도 및 진행 각도를 추정한다고 가정. 단순화를 위해 이 작업의 프레임에서는 차량이 평평한 2D 표면에서 주행하고 차량의 z축이 로컬 내비게이션 프레임의 위쪽 축과 정렬되어 있다고 가정함. 차량의 이동과 관련하여, 세로 방향으로만 움직일 수 있고 수직 또는 측면으로 움직이는 움직임이 없다고 가정함. 결과 상태 벡터는 방정식 1과 같음.

![equation 1](./img/equation1.PNG)

x<sub>k</sub>와 y<sub>k</sub>는 2D 로컬 내비게이션 프레임에서 차량의 좌표임. v<sub>k</sub>는 차량의 전진 속도이며, ψ<sub>k</sub>는 로컬 내비게이션 프레임과 관련된 차량의 진행 각도임. 상태 벡터 x<sub>k</sub>에는 현재 불확실성을 모델링하는 관련 분산-공분산 행렬 P<sub>k</sub>이 있음. GNSS를 사용할 수 없을 때 자신의 위치를 추정하기 위해 차량에 속도 센서와 자이로 스코프가 장착되어 있다고 가정함. 예측 단계는 다음 방정식으로 제공됨.

![equation 2](./img/equation2.PNG)    
![equation 3](./img/equation3.PNG)    
![equation 4](./img/equation4.PNG)    
![equation 5](./img/equation5.PNG)    

여기서 𝜏는 예측 시간 단계이고 v<sub>k</sub>은 속도 센서의 속도 측정 값이며 𝜔<sub>k</sub>은 차량의 z축 자이로 스코프에서 측정 한 회전 속도 임. 속도 및 자이로 스코프 측정은 각각 표준 편차가 𝜎<sub>V</sub> 및 𝜎<sub>𝜔</sub>인 additive white Gaussian noise로 인해 손상됨. 예측 방정식의 통합적 특성으로 인해 위치 좌표 x<sub>k</sub> 및 y<sub>k</sub>에서 오류가 계속 증가함. 새로운 분산-공분산 P<sub>k+1</sub>을 계산하기 위해 비선형 예측 방정식을 선형화해야하는 경우 구현을 확장 칼만 필터로 함.

차량에는 위치와 속도를 측정하는 GNSS 수신기가 장착되어있는 것으로 간주됨. GNSS 수신기는 일련의 GNSS 위성에 대한 범위를 측정하고 동시에 자체 클럭 바이어스를 추정하여 3D 위치를 추정함. 3D 속도는 각 위성에 대한 도플러 편이를 측정하고 수신기 클록 드리프트를 해결하여 유사한 방식으로 추정됨. 3D 속도 벡터에서 평면 전직 속도와 방향을 얻을 수 있음. 세 가지 측정에 대한 모델은 다음과 같이 제공됨.

![equation 6](./img/equation6.PNG)    
![equation 7](./img/equation7.PNG)    
![equation 8](./img/equation8.PNG)    

왼쪽의 기호는 위치, 속도 및 방향에 대한 GNSS 파생 측정 값임. p<sub>k</sub> = [x<sub>k</sub> y<sub>k</sub>]<sup>T</sup> 임. 측정 값은 additive white Gaussian noise 𝜂<sub>p</sub>, 𝜂<sub>v</sub> 및 𝜂<sub>𝜓</sub>에 의해 손상되었다고 가정함.

### Radar Targets
레이더 센서는 LoS에서 반사 대상의 상대 위치와 상대 속도를 측정 할 수 있음. 차량 환경에서 이러한 측정은 일반적으로 수평면에서 제공됨. 오프로드 물체를 감지하기 위해 개방 각이 ± 30 ° 정도 더 크고 감지 범위가 100m 미만인 중거리 레이더를 사용함. 이 레이더는 자동 순항 제어에 사용되는 장거리 레이더와 달리 장애물 회피에 사용됨. 레이더는 일반적으로 하나의 표적에 여러개의 근처 반사체를 모음. 측정주기마다 감지된 타겟 목록이 출력됨. 레이더 표적 범위 및 각도 측정에는 다음 방정식이 사용됨

![equation 9](./img/equation9.PNG)    
![equation 10](./img/equation10.PNG)    

여기서 r<sup>i</sup><sub>k</sub> 및 𝜃<sup>i</sup><sub>k</sub>는 시간 단계 k에서 i 번째 레이더 표적 측정의 범위와 각도 이며, R<sup>j</sup><sub>x</sub>와 R<sup>j</sup><sub>y</sub>는 j 번째 RIO의 2D 좌표 이며, 𝜂<sub>t</sub>와 𝜂<sub>𝜃</sub>는 white Gaussian noise임. 첫 번째 단계로, 이 작업의 범위에서 차량의 속도 및 위치 추정을 향상시키기 위해 목표 속도 측정을 고려하지 않음.

### Infrastructure-based Localization
RIO는 도로 측면이나 위의 고정 된 물체임. 이러한 물체는 교통 표지판, 가로등 기둥 또는 도로 갠트리와 같은 인공 구조물은 물론 나무나 지형과 같은 자연 물체 일 수 있음. 이러한 물체 중 일부는 일반적인 mm-wave 주파수(77GHz ~ 79GHz)에서 작동하는 레이더의 RF 신호를 반사 할 수 있다고 가정함. 명확한 위치를 가지려면 RIO의 크기를 제한하는 것이 중요함. 소음 방지 벽 및 도로 장벽은 단일 위치에 국한되지 않고 더 넓은 공간에 걸쳐 있기 때문에 구조에 적합하지 않음.

이 백서에 제시된 자체 위치 지정 접근 방식은 전체 레이더 표적 목록에서 정적 물체를 필터링 해야함. 이것은 차량의 전진 속도를 사용하여 완벽하게 수행되는 것으로 가정함. RIO로 잘못 감지 된 움직이는 물체는 차량의 자체 위치 파악에 오류를 랍ㄹ생시킴. 또한 주변에서 감지 된 정적 객체는 RIO에 속한다고 가정함. 주차 된 차량 또는 기타 반 정적 물체는 이 방법을 장기간 사용할 때 적합한 앵커 포인트를 제공하지 않음. 이 경우는 여기서 무시됨.

차량 자체 포지셔닝을 위해 차량 위치와 함께 RIO의 위치를 추정해야함. 따라서 방정식 1은 J 번째 RIO의 좌표의 위치로 확장됨.

![equation 11](./img/equation11.PNG)

처음에 상태 벡터에는 차량에 속하는 처음 4개의 상태 만 포함됨. 새로운 레이더 측정을 통해 새로운 RIO가 상태에 도입되고 크기가 동적으로 조정됨. 새로운 레이더 측정을 받은 후 첫 번째 단계 
